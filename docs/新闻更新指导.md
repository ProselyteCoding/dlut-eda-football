# 新闻更新指导

在编辑前确保你已安装 Node.js 和 npm，并在项目根目录下运行以下命令安装依赖：

```bash
npm install
```

**注意：下文所有命令均在项目根目录下执行。**

新闻使用 Markdown 格式编写，请确保你会编写或至少可以在AI协助下编写。如果不会，学习可参考 [十分钟上手Markdown](https://proselytecoding.github.io/post/markdown-tutorial) 或网上其他资料。

Markdown文件在 `src/content/news` 目录下，每篇新闻一个子文件夹，命名与路由名称一致。图片资源存放在 `public/news-assets` 目录下；每篇新闻一个子文件夹，命名与路由名称一致。

*作者联系方式：3197908785@qq.com，请优先查看本文档中可能的常见问题、尝试自行解决。*

## 📋 快速流程

### 1. 创建新闻

```bash
npm run add-news
```

按提示输入：

- **路由名称**：英文，用连字符分隔（如：`spring-match-2024`）
- **新闻标题**：中文标题
- **作者姓名**：作者信息
- **标签**：空格分隔的标签

### 2. 添加封面图片

将封面图片重命名为 `cover.jpg` 并放入对应文件夹 `public/news-assets/[路由名称]/cover.jpg`

### 3. 编辑新闻内容

编辑生成的 markdown 文件，即 `src/content/news/[路由名称].md`

### 4. 应用更新

```bash
npm run generate-news
# 这一步将同步新闻数据至页面，只进行'add-news'不会更新页面
```

### 5. 预览

```bash
npm run dev
# 访问 http://localhost:3000/news/[路由名称]，可查看实际运行效果
# 如有问题请参考下文常见问题，仍无法解决可联系作者 3197908785@qq.com
```

## ⚠️ 注意事项

### 路由命名规范

- ✅ `spring-football-2024`
- ✅ `orange-cup-final`
- ❌ `SpringFootball2024`（避免大写）
- ❌ `spring_football_2024`（避免下划线）
- ❌ `春季足球2024`（避免中文）

### 封面图片要求

- **文件名**：必须是 `cover.jpg`
- **比例**：16:9（如1920x1080）
- **大小**：建议小于2MB
- **位置**：`public/news-assets/[路由名称]/cover.jpg`

### Markdown 文件结构

以下是一个示例：

```markdown
---
title: "中文新闻标题"
publishDate: "2025年09月14日"
author: "作者姓名"
tags: ["标签1", "标签2", "标签3"]
coverImage: "/news-assets/[路由名称]/cover.jpg"
---

<!-- 直接写正文内容，此处不要再写标题 -->

新闻正文内容...

![图片描述](/news-assets/[路由名称]/图片文件名.jpg)
```

## 🔧 常见问题

### 新闻不显示在首页

```bash
npm run generate-news  # 重新同步数据
```

### 图片不显示

检查：

- 图片文件是否存在
- 路径是否正确
- 文件名是否为 `cover.jpg`

### 路由404错误

检查：

- 路由名称格式是否正确
- 是否已运行 `generate-news`
- markdown文件名是否与路由匹配

### 编译错误

检查：

- Markdown 格式
- 图片路径是否正确

*这一步如有其他报错请联系作者。*

## 📁 文件结构

```menu
src/content/news/           # markdown文件
public/news-assets/         # 图片资源
├── route-name-1/
│   ├── cover.jpg          # 封面（必需）
│   └── other-image.jpg    # 其他图片
└── route-name-2/
    └── cover.jpg
```

## 💡 图片命名

- **封面图片**：必须命名为 `cover.jpg`
- **其他图片**：可以使用中文或英文名称
- **路径引用**：在markdown中使用完整路径 `/news-assets/[路由名称]/图片名.jpg`

## 🗑️ 删除新闻

```bash
# 手动删除markdown文件（建议）

# 终端指令
# 删除markdown文件
rm src/content/news/[路由名称].md
# 删除资源文件夹
rm -rf public/news-assets/[路由名称]/

# 重新生成
npm run generate-news
```
